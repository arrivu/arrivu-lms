// Generated by CoffeeScript 1.3.3
(function() {

  require(['compiled/models/CourseRestore', 'compiled/views/accounts/admin_tools/AdminToolsView', 'compiled/views/accounts/admin_tools/RestoreContentPaneView', 'compiled/views/accounts/admin_tools/CourseSearchFormView', 'compiled/views/accounts/admin_tools/CourseSearchResultsView', 'compiled/views/InputFilterView', 'compiled/views/accounts/UserView', 'compiled/views/PaginatedCollectionView', 'compiled/collections/CommMessageCollection', 'compiled/collections/AccountUserCollection', 'compiled/collections/AuthLoggingCollection', 'compiled/views/accounts/admin_tools/CommMessagesContentPaneView', 'compiled/views/accounts/admin_tools/AuthLoggingContentPaneView', 'compiled/views/accounts/admin_tools/UserDateRangeSearchFormView', 'compiled/views/accounts/admin_tools/CommMessageItemView', 'compiled/views/accounts/admin_tools/AuthLoggingItemView', 'jst/accounts/admin_tools/commMessagesSearchResults', 'jst/accounts/admin_tools/authLoggingSearchResults', 'jst/accounts/usersList'], function(CourseRestoreModel, AdminToolsView, RestoreContentPaneView, CourseSearchFormView, CourseSearchResultsView, InputFilterView, UserView, PaginatedCollectionView, CommMessageCollection, AccountUserCollection, AuthLoggingCollection, CommMessagesContentPaneView, AuthLoggingContentPaneView, UserDateRangeSearchFormView, CommMessageItemView, AuthLoggingItemView, messagesSearchResultsTemplate, authLoggingResultsTemplate, usersTemplate) {
    var loggingContentView, loggingEvents, messages, messagesContentView, restoreModel, users;
    restoreModel = new CourseRestoreModel({
      account_id: ENV.ACCOUNT_ID
    });
    messages = new CommMessageCollection(null, {
      params: {
        perPage: 10
      }
    });
    users = new AccountUserCollection(null, {
      account_id: ENV.ACCOUNT_ID
    });
    messagesContentView = new CommMessagesContentPaneView({
      searchForm: new UserDateRangeSearchFormView({
        formName: 'messages',
        inputFilterView: new InputFilterView({
          collection: users
        }),
        usersView: new PaginatedCollectionView({
          collection: users,
          itemView: UserView,
          buffer: 1000,
          template: usersTemplate
        }),
        collection: messages
      }),
      resultsView: new PaginatedCollectionView({
        template: messagesSearchResultsTemplate,
        itemView: CommMessageItemView,
        collection: messages
      }),
      collection: messages
    });
    loggingEvents = new AuthLoggingCollection(null);
    loggingContentView = new AuthLoggingContentPaneView({
      searchForm: new UserDateRangeSearchFormView({
        formName: 'logging',
        inputFilterView: new InputFilterView({
          collection: users
        }),
        usersView: new PaginatedCollectionView({
          collection: users,
          itemView: UserView,
          buffer: 1000,
          template: usersTemplate
        }),
        collection: loggingEvents
      }),
      resultsView: new PaginatedCollectionView({
        template: authLoggingResultsTemplate,
        itemView: AuthLoggingItemView,
        collection: loggingEvents
      }),
      collection: loggingEvents
    });
    this.app = new AdminToolsView({
      el: "#content",
      tabs: {
        courseRestore: ENV.PERMISSIONS.restore_course,
        viewMessages: ENV.PERMISSIONS.view_messages,
        authLogging: ENV.PERMISSIONS.auth_logging
      },
      restoreContentPaneView: new RestoreContentPaneView({
        courseSearchFormView: new CourseSearchFormView({
          model: restoreModel
        }),
        courseSearchResultsView: new CourseSearchResultsView({
          model: restoreModel
        })
      }),
      messageContentPaneView: messagesContentView,
      authLoggingContentPaneView: loggingContentView
    });
    return this.app.render();
  });

}).call(this);
