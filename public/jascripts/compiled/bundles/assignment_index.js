// Generated by CoffeeScript 1.3.3
(function() {

  require(['compiled/collections/AssignmentGroupCollection', 'compiled/models/Course', 'compiled/views/InputFilterView', 'compiled/views/assignments/AssignmentGroupListView', 'compiled/views/assignments/CreateGroupView', 'compiled/views/assignments/IndexView', 'compiled/views/assignments/AssignmentSettingsView', 'compiled/views/assignments/AssignmentGroupWeightsView', 'compiled/views/assignments/ToggleShowByView'], function(AssignmentGroupCollection, Course, InputFilterView, AssignmentGroupListView, CreateGroupView, IndexView, AssignmentSettingsView, AssignmentGroupWeightsView, ToggleShowByView) {
    var assignmentGroups, assignmentGroupsView, assignmentSettingsView, course, createGroupView, includes, inputFilterView, showByView;
    course = new Course;
    course.url = ENV.URLS.course_url;
    course.fetch();
    includes = ["assignments"];
    if (ENV.PERMISSIONS.manage) {
      includes.push("all_dates");
    }
    assignmentGroups = new AssignmentGroupCollection([], {
      course: course,
      params: {
        include: includes,
        override_assignment_dates: !ENV.PERMISSIONS.manage
      }
    });
    inputFilterView = new InputFilterView({
      collection: assignmentGroups
    });
    assignmentGroupsView = new AssignmentGroupListView({
      collection: assignmentGroups,
      sortURL: ENV.URLS.sort_url,
      assignment_sort_base_url: ENV.URLS.assignment_sort_base_url,
      course: course
    });
    assignmentSettingsView = false;
    createGroupView = false;
    showByView = false;
    if (ENV.PERMISSIONS.manage) {
      assignmentSettingsView = new AssignmentSettingsView({
        model: course,
        assignmentGroups: assignmentGroups,
        weightsView: AssignmentGroupWeightsView
      });
      createGroupView = new CreateGroupView({
        assignmentGroups: assignmentGroups,
        course: course
      });
    } else {
      showByView = new ToggleShowByView({
        course: course,
        assignmentGroups: assignmentGroups
      });
    }
    this.app = new IndexView({
      assignmentGroupsView: assignmentGroupsView,
      inputFilterView: inputFilterView,
      assignmentSettingsView: assignmentSettingsView,
      createGroupView: createGroupView,
      showByView: showByView
    });
    this.app.render();
    return assignmentGroups.fetch({
      reset: true
    });
  });

}).call(this);
