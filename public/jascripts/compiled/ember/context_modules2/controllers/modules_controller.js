// Generated by CoffeeScript 1.3.3
(function() {

  define(['ember'], function(Ember) {
    return Ember.Controller.extend({
      editable: true,
      togglePreview: function() {
        if (this.get('editable')) {
          return this.set('editable', false);
        } else {
          return this.set('editable', true);
        }
      },
      filterItems: (function() {
        var exp;
        exp = new RegExp(this.searchQuery, 'g');
        return this.get('content').map(function(module) {
          var moduleHidden;
          if (exp.test(module.get('name'))) {
            module.set('hidden', false);
            module.get('items').map(function(item) {
              item.set('visible', true);
              return item;
            });
          } else {
            moduleHidden = true;
            module.get('items').map(function(item) {
              if (exp.test(item.get('title'))) {
                item.set('visible', true);
                moduleHidden = false;
              } else {
                item.set('visible', false);
              }
              return item;
            });
            module.set('hidden', moduleHidden);
          }
          return module;
        });
      }).observes('searchQuery')
    });
  });

}).call(this);
